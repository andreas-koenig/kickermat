<h2>Operating State</h2>

<p>
  The <i>Telemecanique</i> and <i>Faulhaber</i> motors implement CiA DSP402, a device profile for drives and motion control that defines a state machine controlling the operating state of a motor. On startup a motor automatically enters <i>Not ready to switch on</i> and transitions to <i>Switch on disabled</i> once it is initialized. From then on the operating state can be controlled by commands that are sent as CANopen messages. In case of errors a fault reaction is triggered and upon its completion the motors enters the <i>Fault</i> state.
</p>

<p>
  The operating state of this <i>{{motor.model}}</i> motor is: <nz-tag>{{opStateToString(motor.operatingState)}}</nz-tag>
</p>


<svg xmlns="http://www.w3.org/2000/svg" style="background-color: rgb(255, 255, 255);"
     xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="509px" height="693px" viewBox="-0.5 -0.5 509 693">
  <g>
    <path d="M 447 605 L 447.98 145 Q 448 135 438 135 L 214.12 135" fill="none" stroke="#adadad" />
    <path d="M 209.12 135 L 214.12 133.33 L 214.12 136.67 Z" fill="#adadad" stroke="#adadad" />
    <path d="M 118 485 L 118 598.88" fill="none" stroke="#adadad" />
    <path d="M 118 603.88 L 116.33 598.88 L 119.67 598.88 Z" fill="#adadad" stroke="#adadad" />
    <path d="M 178 445 L 178 331.12" fill="none" stroke="#adadad" />
    <path d="M 178 326.12 L 179.67 331.12 L 176.33 331.12 Z" fill="#adadad" stroke="#adadad" />
    <path d="M 118 165 L 118 278.88" fill="none" stroke="#adadad" />
    <path d="M 118 283.88 L 116.33 278.88 L 119.67 278.88 Z" fill="#adadad" stroke="#adadad" />
    <g [ngClass]="{'state': true, 'selected': motor.operatingState === operatingStateEnum.SwitchOnDisabled}" transform="translate(-0.5 -0.5)">
      <rect x="88" y="125" width="120" height="40" rx="6" ry="6" />
      <text x="148" y="149">Switch on disabled</text>
    </g>
    <path d="M 148 85 L 148 118.88" fill="none" stroke="#adadad" />
    <path d="M 148 123.88 L 146.33 118.88 L 149.67 118.88 Z" fill="#adadad" stroke="#adadad" />
    <g [ngClass]="{'state': true, 'selected': motor.operatingState === operatingStateEnum.NotReadyToSwitchOn}" transform="translate(-0.5 -0.5)">
      <rect x="88" y="45" width="120" height="40" rx="6" ry="6" />
      <text x="148" y="62">Not ready to</text>
      <text x="148" y="77">switch on</text>
    </g>
    <g [ngClass]="{'state': true, 'selected': motor.operatingState === operatingStateEnum.ReadyToSwitchOn}" transform="translate(-0.5 -0.5)">
      <rect x="88" y="285" width="120" height="40" rx="6" ry="6" />
      <text x="148" y="309">Ready to switch on</text>
    </g>
    <path d="M 148 5 L 148 38.88" fill="none" stroke="#adadad" />
    <path d="M 148 43.88 L 146.33 38.88 L 149.67 38.88 Z" fill="#adadad" stroke="#adadad" />
    <g class="cmd" transform="translate(-0.5 -0.5)rotate(90 121.49999999999909 542)">
      <rect x="76" y="538" width="85" height="14" rx="1.26" ry="1.26" />
      <text x="119" y="547">EnableOperation</text>
    </g>
    <g class="cmd" transform="translate(-0.5 -0.5)rotate(-90 175.5 385)">
      <rect x="153" y="381" width="49" height="14" rx="1.26" ry="1.26" />
      <text x="177" y="391">Shutdown</text>
    </g>
    <g class="cmd" transform="translate(-0.5 -0.5)rotate(-90 445 381.00000000000045)">
      <rect x="408" y="377" width="78" height="14" rx="1.26" ry="1.26" />
      <text x="447" y="388">DisableVoltage</text>
    </g>
    <g [ngClass]="{'state': true, 'selected': motor.operatingState === operatingStateEnum.SwitchedOn}" transform="translate(-0.5 -0.5)">
      <rect x="88" y="445" width="120" height="40" rx="6" ry="6" />
      <text x="148" y="469">Switched on</text>
    </g>
    <g [ngClass]="{'state': true, 'selected': motor.operatingState === operatingStateEnum.QuickStopActive}" transform="translate(-0.5 -0.5)">
      <rect x="387" y="605" width="120" height="40" rx="6" ry="6" />
      <text x="447" y="629">Quick-Stop active</text>
    </g>
    <g [ngClass]="{'state': true, 'selected': motor.operatingState === operatingStateEnum.OperationEnable}" transform="translate(-0.5 -0.5)">
      <rect x="88" y="605" width="120" height="40" rx="6" ry="6" />
      <text x="148" y="629">Operation enable</text>
    </g>
    <g [ngClass]="{'state': true, 'selected': motor.operatingState === operatingStateEnum.Fault}" transform="translate(-0.5 -0.5)">
      <rect x="288" y="245" width="120" height="40" rx="6" ry="6" />
      <text x="348" y="269">Fault</text>
    </g>
    <g [ngClass]="{'state': true, 'selected': motor.operatingState === operatingStateEnum.FaultReactionActive}" transform="translate(-0.5 -0.5)">
      <rect x="288" y="325" width="120" height="40" rx="6" ry="6" />
      <text x="348" y="343">Fault Reaction</text>
      <text x="348" y="358">active</text>
    </g>
    <path d="M 118 325 L 118 438.88" fill="none" stroke="#adadad" />
    <path d="M 118 443.88 L 116.33 438.88 L 119.67 438.88 Z" fill="#adadad" stroke="#adadad" />
    <g class="cmd" transform="translate(-0.5 -0.5)rotate(90 120.5 381.00000000000045)">
      <rect x="92" y="376" width="51" height="14" rx="1.26" ry="1.26" />
      <text x="118" y="386">SwitchOn&#xa;</text>
    </g>
    <path d="M 178 285 L 178 171.12" fill="none" stroke="#adadad" />
    <path d="M 178 166.12 L 179.67 171.12 L 176.33 171.12 Z" fill="#adadad" stroke="#adadad" />
    <g class="cmd" transform="translate(-0.5 -0.5)rotate(90 121.49999999999909 221.00000000000045)">
      <rect x="94" y="218" width="49" height="14" rx="1.26" ry="1.26" />
      <text x="119" y="227">Shutdown</text>
    </g>
    <g class="cmd" transform="translate(-0.5 -0.5)rotate(-90 175.5 226.00000000000045)">
      <rect x="138.5" y="222" width="78" height="14" rx="1.26" ry="1.26" />
      <text x="176" y="233">DisableVoltage</text>
    </g>
    <path d="M 178 605 L 178 491.12" fill="none" stroke="#adadad" />
    <path d="M 178 486.12 L 179.67 491.12 L 176.33 491.12 Z" fill="#adadad" stroke="#adadad" />
    <g class="cmd" transform="translate(-0.5 -0.5)rotate(-90 175.5 545)">
      <rect x="133" y="541" width="89" height="14" rx="1.26" ry="1.26" />
      <text x="177" y="551">DisableOperation</text>
    </g>
    <path d="M 208 625 L 380.88 625" fill="none" stroke="#adadad" />
    <path d="M 385.88 625 L 380.88 626.67 L 380.88 623.33 Z" fill="#adadad" stroke="#adadad" />
    <g class="cmd" transform="translate(-0.5 -0.5)">
      <rect x="265" y="619" width="55" height="14" rx="1.26" ry="1.26" />
      <text x="293" y="629">QuickStop</text>
    </g>
    <path d="M 417 645 L 417 655 Q 417 665 407 665 L 188 665 Q 178 665 178 658.06 L 178 651.12" fill="none" stroke="#adadad" />
    <path d="M 178 646.12 L 179.67 651.12 L 176.33 651.12 Z" fill="#adadad" stroke="#adadad" />
    <path d="M 447 645 L 447 675 Q 447 685 437 685 L 158 685 Q 148 685 148 675 L 148 651.12" fill="none" stroke="#adadad" />
    <path d="M 148 646.12 L 149.67 651.12 L 146.33 651.12 Z" fill="#adadad" stroke="#adadad" />
    <g class="cmd" transform="translate(-0.5 -0.5)">
      <rect x="250" y="659" width="85" height="14" rx="1.26" ry="1.26" />
      <text x="293" y="669">EnableOperation</text>
    </g>
    <g class="cmd" transform="translate(-0.5 -0.5)">
      <rect x="262" y="679" width="61" height="14" rx="1.26" ry="1.26" />
      <text x="293" y="690">FaultReset</text>
    </g>
    <path d="M 88 615 L 58 615 Q 48 615 48 605 L 48 315 Q 48 305 58 305 L 81.88 305" fill="none" stroke="#adadad" />
    <path d="M 86.88 305 L 81.88 306.67 L 81.88 303.33 Z" fill="#adadad" stroke="#adadad" />
    <g class="cmd" transform="translate(-0.5 -0.5)rotate(-90 46.49999999999909 458)">
      <rect x="24" y="453" width="49" height="14" rx="1.26" ry="1.26" />
      <text x="48" y="464">Shutdown</text>
    </g>
    <path d="M 88 635 L 18 635 Q 8 635 8 625 L 8 155 Q 8 145 18 145 L 78 145 Q 88 145 84.94 145 L 81.88 145" fill="none" stroke="#adadad" />
    <path d="M 86.88 145 L 81.88 146.67 L 81.88 143.33 Z" fill="#adadad" stroke="#adadad" />
    <g class="cmd" transform="translate(-0.5 -0.5)rotate(-90 6.000000000000455 371.00000000000045)">
      <rect x="-31" y="366" width="78" height="14" rx="1.26" ry="1.26" />
      <text x="7" y="377">DisableVoltage</text>
    </g>
    <path d="M 208 465 L 238 465 Q 248 465 248 455 L 248 165 Q 248 155 238 155 L 218 155 Q 208 155 211.06 155 L 214.12 155" fill="none" stroke="#adadad" />
    <path d="M 209.12 155 L 214.12 153.33 L 214.12 156.67 Z" fill="#adadad" stroke="#adadad" />
    <g class="cmd" transform="translate(-0.5 -0.5)rotate(-90 245 305)">
      <rect x="208" y="301" width="78" height="14" rx="1.26" ry="1.26" />
      <text x="247" y="312">DisableVoltage</text>
    </g>
    <path d="M 348 245 L 348 155 Q 348 145 338 145 L 214.12 145" fill="none" stroke="#adadad" />
    <path d="M 209.12 145 L 214.12 143.33 L 214.12 146.67 Z" fill="#adadad" stroke="#adadad" />
    <g class="cmd" transform="translate(-0.5 -0.5)rotate(-90 346.00000000000045 196.00000000000045)">
      <rect x="317.5" y="191" width="61" height="14" rx="1.26" ry="1.26" />
      <text x="347" y="202">FaultReset</text>
    </g>
    <path d="M 348 325 L 348 314 Q 348 304 348 297.56 L 348 291.12" fill="none" stroke="#adadad" />
    <path d="M 348 286.12 L 349.67 291.12 L 346.33 291.12 Z" fill="#adadad" stroke="#adadad" />
    <path d="M 347.66 405 L 347.66 394 Q 347.67 384 347.66 377.56 L 347.66 371.12" fill="none" stroke="#adadad" />
    <path d="M 347.66 366.12 L 349.33 371.12 L 346 371.12 Z" fill="#adadad" stroke="#adadad" />
  </g>

</svg>
